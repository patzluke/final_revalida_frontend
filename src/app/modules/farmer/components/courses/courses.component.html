<app-side-nav>
  <p-tabView>
    <p-tabPanel header="Courses">
      <div class="mainBg" data-aos="zoom-out" data-aos-duration="333">
        <div class="main" data-aos="fade-right" data-aos-duration="333">
          <div class="container">
            <div class="row">
              <div class="col">
                <p
                  class="h1 text-light header"
                  data-aos="fade-right"
                  data-aos-duration="333"
                >
                  COURSES
                </p>
              </div>
            </div>
            <div class="row">
              <div
                class="col mb-3"
                *ngFor="
                  let course of (selectCourses$ | async)?.slice(
                    startIndex(),
                    endIndex()
                  )
                "
                data-aos="fade-right"
                data-aos-duration="333"
              >
                <div class="items" style="height: 100%">
                  <p class="h4" data-aos="fade-right" data-aos-duration="333">
                    {{ course.courseName }}
                  </p>
                  <p data-aos="fade-right" data-aos-duration="333">
                    {{ course.description }}
                  </p>
                  <p
                    class="d-flex flex-column"
                    data-aos="fade-right"
                    data-aos-duration="333"
                  >
                    <span class="h5">Training Duration</span>
                    <span
                      >{{ course.durationInDays }}
                      {{ course.durationInDays == 1 ? "Day" : "Days" }}</span
                    >
                  </p>
                  <div class="d-flex" style="justify-content: end">
                    <p *ngIf="(selectCourseEnrolledByCourseId$(course) | async)"  style="color: red;"><i>You are currently enrolled in this course</i></p>
                    <button
                    *ngIf="!(selectCourseEnrolledByCourseId$(course) | async)"
                      class="btn btn-success"
                      (click)="enrollCourse(course)"
                    >
                      Enroll
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="mb-3 mt-3">
                  <div class="pagination pagination-md justify-content-end">
                    <li class="page-item">
                      <button
                        class="page-link"
                        [disabled]="currentPage === 1"
                        (click)="changePage(currentPage - 1)"
                      >
                        Previous
                      </button>
                    </li>
                    <li class="page-item">
                      <button class="page-link" disabled>
                        {{ currentPage }}
                      </button>
                    </li>

                    <li class="page-item">
                      <button
                        class="page-link"
                        [disabled]="
                          endIndex() >= (selectCourses$ | async)!.length
                        "
                        (click)="changePage(currentPage + 1)"
                      >
                        Next
                      </button>
                    </li>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </p-tabPanel>
    <p-tabPanel header="Enrolled Courses">
      <div class="mainBg" data-aos="zoom-out" data-aos-duration="333">
        <div class="main" data-aos="fade-right" data-aos-duration="333">
          <div class="container">
            <div class="row">
              <div class="col">
                <p
                  class="h1 text-light header"
                  data-aos="fade-right"
                  data-aos-duration="333"
                >
                  COURSES
                </p>
              </div>
            </div>
            <div class="row">
              <div
                class="col mb-3"
                *ngFor="
                  let course of (selectCoursesEnrolled$ | async)?.slice(
                    startIndex(),
                    endIndex()
                  )
                "
                data-aos="fade-right"
                data-aos-duration="333"
              >
                <div *ngIf="convertStringToDate(course.endOfEnrollment!) > dateToday" class="items" style="height: 100%">
                  <p class="h4" data-aos="fade-right" data-aos-duration="333">
                    {{ course.course.courseName }}
                  </p>
                  <p data-aos="fade-right" data-aos-duration="333">
                    {{ course.course.description }}
                  </p>
                  <p
                    class="d-flex flex-column"
                    data-aos="fade-right"
                    data-aos-duration="333"
                  >
                    <span class="h5">Training Period</span>
                    <span
                      >{{ course.enrollmentDate | date }} -
                      {{ course.endOfEnrollment | date }}</span
                    >
                  </p>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="mb-3 mt-3">
                  <div class="pagination pagination-md justify-content-end">
                    <li class="page-item">
                      <button
                        class="page-link"
                        [disabled]="currentPage === 1"
                        (click)="changePage(currentPage - 1)"
                      >
                        Previous
                      </button>
                    </li>
                    <li class="page-item">
                      <button class="page-link" disabled>
                        {{ currentPage }}
                      </button>
                    </li>

                    <li class="page-item">
                      <button
                        class="page-link"
                        [disabled]="
                          endIndex() >= (selectCoursesEnrolled$ | async)!.length
                        "
                        (click)="changePage(currentPage + 1)"
                      >
                        Next
                      </button>
                    </li>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </p-tabPanel>
  </p-tabView>
</app-side-nav>
